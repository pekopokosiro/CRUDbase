{% extends "application.html" %}

{% block content %}
<h2>素材一覧</h2>

<!-- 検索フォームの追加 -->
<form method="GET" action="{{ url_for('index') }}">
    <input type="text" name="search" placeholder="素材名、カテゴリー、仕入れ先で検索" value="{{ request.args.get('search', '') }}">
    <button type="submit">検索</button>
    <a href="{{ url_for('index') }}" class="reset-button">リセット</a>
</form>

<a href="{{ url_for('add_material') }}" class="add-button">新規素材追加</a>
<a href="{{ url_for('new_recipe') }}" class="add-button">新規レシピ追加</a>
<a href="{{ url_for('recipe_list') }}" class="add-button">レシピ一覧を見る</a>

<table>
    <thead>
        <tr>
            <th>素材名</th>
            <th>カテゴリー</th>
            <th>数量</th>
            <th>単価</th>
            <th>仕入れ先</th>
            <th>購入日</th>
            <th>備考</th>
            <th>アクション</th>
        </tr>
    </thead>
    <tbody>
        {% for material in materials %}
        <tr>
            <td>{{ material.name }}</td>
            <td>{{ material.category }}</td>
            <td>{{ material.quantity }}</td>
            <td>{{ material.unit_price }}</td>
            <td>{{ material.supplier }}</td>
            <td>{{ material.purchase_date }}</td>
            <td>{{ material.supplier_contact_or_notes }}</td>
            <td class="actions">
                <a href="{{ url_for('edit_material', id=material.id) }}">編集</a>
                <a href="{{ url_for('use_material', id=material.id) }}">使用する</a>
                <a href="{{ url_for('delete_material', id=material.id) }}" onclick="return confirm('本当に削除しますか？');">削除</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
